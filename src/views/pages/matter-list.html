<div class="container mt-25">

  <div class="card">
    <div class="card-header">
      <h2>
        <button ui-sref="page.matter-new"
          class="btn btn-primary btn-icon-text waves-effect pull-right"
          permission permission-only="['LAWYER', 'ADMIN']">
          <i class="zmdi zmdi-plus"></i> New
        </button>
        MATTERS <small>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</small>
      </h2>
    </div>

    <div class="card-body">
      <div class="table-responsive" ng-if="matters.length && !isLoading">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Name</th>
              <th>Area</th>
              <th>Status</th>
              <th permission permission-only="['LAWYER', 'ADMIN']">Customer</th>
              <th permission permission-only="['CUSTOMER', 'ADMIN']">Lawyer</th>
              <th>Open Date</th>
              <th permission permission-only="['LAWYER', 'ADMIN']">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="m in matters">
              <td>
                <a ui-sref="page.matter-details({id: m.id})" >{{m.title}}</a>
              </td>
              <td>{{m.area_of_interest}}</td>
              <td>
                <div class="flag flag-success" ng-if="m.status == 'success'">{{m.status}}</div>
                <div class="flag flag-pending" ng-if="m.status == 'pending'">Pending</div>
                <div class="flag flag-closed" ng-if="m.status == 'closed'">Closed</div>
              </td>
              <td permission permission-only="['LAWYER', 'ADMIN']">
                <a ui-sref="profile.details({id: m.customer.id})">{{m.customer.first_name}} {{m.customer.last_name}}</a>
              </td>
              <td permission permission-only="['CUSTOMER', 'ADMIN']">
                <a ui-sref="profile.details({id: m.owner.id})">{{m.owner.first_name}} {{m.owner.last_name}}</a>
              </td>
              <td>{{m.created_at | amDateFormat: "DD MMMM YYYY" }}</td>
              <td permission permission-only="['LAWYER', 'ADMIN']">
                <a ui-sref="page.matter-edit(m)"><i class="zmdi zmdi-edit"></i> Edit</a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="alert alert-danger" ng-if="matters.length == 0 && !isLoading">
      Matters Empty! Create a New matter.
    </div>
    <div class="isLoading" ng-if="isLoading">
      <div class="loader">
        <div class="loader-inner ball-pulse-sync">
          <div ng-repeat="i in [1,2,3]"></div>
        </div>
      </div>
    </div>
    <div class="pagination-wrp" ng-class="{'hide': totalItems <= perPage }">
      <uib-pagination total-items="totalItems" items-per-page="perPage" ng-model="currentPage" ng-change="nextMatter(currentPage)"></uib-pagination>
    </div>
  </div>

</div>
